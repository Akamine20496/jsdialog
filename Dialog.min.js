class Dialog{static OK_OPTION=0;static CANCEL_OPTION=1;static YES_OPTION=2;static NO_OPTION=3;static{Object.defineProperties(this,{OK_OPTION:{writable:!1,configurable:!1},CANCEL_OPTION:{writable:!1,configurable:!1},YES_OPTION:{writable:!1,configurable:!1},NO_OPTION:{writable:!1,configurable:!1}}),this.#t(),this.#e()}static#o=Promise.resolve();static#i={dialog:{mouseover:{"box-shadow":"0 6px 12px rgba(0, 0, 0, 0.3)"},mouseout:{"box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)"}},button:{mouseover:{"background-color":"#495057",outline:"1px solid rgba(173, 181, 189, 0.5)","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)"},mouseout:{"background-color":"#adb5bd",outline:"none","box-shadow":"none"},focus:{outline:"1px solid rgba(173, 181, 189, 0.5)","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)"},blur:{outline:"none","box-shadow":"none"}}};static#n(t){return t.replace(/<[^>]*>/g,"")}static#a(t){return/<[^>]*>/g.test(t)}static#t(){let t=document.getElementById("dialog-scrollbar-style");t||(t=document.createElement("style"),t.id="dialog-scrollbar-style",document.head.appendChild(t),t.textContent="\n            dialog::-webkit-scrollbar,\n            dialog .scrollableDialogContent::-webkit-scrollbar,\n            #plainDialog .scrollableDialogContent::-webkit-scrollbar {\n                width: 5px !important;\n            }\n            dialog::-webkit-scrollbar-track,\n            dialog .scrollableDialogContent::-webkit-scrollbar-track,\n            #plainDialog .scrollableDialogContent::-webkit-scrollbar-track {\n                display: none !important;\n            }\n            dialog::-webkit-scrollbar-thumb,\n            dialog .scrollableDialogContent::-webkit-scrollbar-thumb,\n            #plainDialog .scrollableDialogContent::-webkit-scrollbar-thumb {\n                background-color: #888 !important;\n                border-radius: 10px !important;\n            }\n            dialog::-webkit-scrollbar-thumb:hover,\n            dialog .scrollableDialogContent::-webkit-scrollbar-thumb:hover,\n            #plainDialog .scrollableDialogContent::-webkit-scrollbar-thumb:hover {\n                background-color: #555 !important;\n            }\n            dialog::-webkit-scrollbar-button,\n            dialog .scrollableDialogContent::-webkit-scrollbar-button,\n            #plainDialog .scrollableDialogContent::-webkit-scrollbar-button {\n                display: none !important;\n            }\n        ")}static#e(){let t=document.getElementById("dialog-animation-style");t||(t=document.createElement("style"),t.id="dialog-animation-style",document.head.appendChild(t),t.textContent="\n            #plainDialogBackdrop.fade-in, #plainDialog.fade-in {\n                animation: fade-in 0.3s ease forwards !important;\n            }\n            #plainDialogBackdrop.fade-out, #plainDialog.fade-out {\n                animation: fade-out 0.3s ease forwards !important;\n            }\n            @keyframes fade-in {\n                from { opacity: 0; }\n                to { opacity: 1; }\n            }\n            @keyframes fade-out {\n                from { opacity: 1; }\n                to { opacity: 0; }\n            }\n        ")}static#l(t,e=!1){function o(e,o){if(t.eventStyles&&t.eventStyles[o])for(const[i,n]of Object.entries(t.eventStyles[o]))for(const[t,o]of Object.entries(n))e.addEventListener(i,(()=>e.style.setProperty(t,o,"important")))}function i(t,e){if(t&&Object.keys(e).length>0)for(const[o,i]of Object.entries(e))t.style.setProperty(o,i,"important")}return()=>new Promise((n=>{if(e){const a=document.createElement("div");a.id=t.backdrop.id||"backdrop",a.className="fade-in",i(a,Object.assign({display:"none",position:"fixed",top:"0",left:"0",width:"100vw",height:"100vh","background-color":"rgba(0, 0, 0, 0.1)","z-index":"9999","overflow-y":"auto","overflow-x":"hidden",margin:"0",padding:"0","box-sizing":"border-box",opacity:"0","justify-content":"center","align-items":"center"},t.backdrop.style)),o(a,"backdrop"),document.body.prepend(a);const l=document.createElement("div");if(l.id=t.dialog.id||"modalDialog",l.className="fade-in",i(l,Object.assign({margin:"auto",padding:"0","border-radius":"10px","box-shadow":"0 6px 12px rgba(0, 0, 0, 0.2)","max-width":"50vw","max-height":"85vh","min-width":"300px","min-height":"150px","box-sizing":"border-box","background-color":"#f9f9f9",display:"flex","flex-direction":"column",opacity:"0","overflow-y":"auto","overflow-x":"hidden","font-family":"Arial, sans-serif"},t.dialog.style)),o(l,"dialog"),t.header){const s=document.createElement(t.header.tag||"div");if(t.header.id&&(s.id=t.header.id),i(s,Object.assign({width:"auto",height:"auto","box-sizing":"unset",padding:"0",margin:"0",flex:"0 0 20%",display:"flex","align-items":"center","justify-content":"flex-end"},t.header.style)),o(s,"header"),t.header.closeButton){const r=document.createElement(t.header.closeButton.tag||"button");t.header.closeButton.id&&(r.id=t.header.closeButton.id),r.innerText=t.header.closeButton.text||"×",i(r,Object.assign({"user-select":"none","font-family":"Arial, sans-serif",width:"20px",height:"auto","box-sizing":"unset","font-size":"1.250rem","text-align":"center","background-color":"#adb5bd",margin:"0",padding:"8px 16px",border:"none","border-radius":"4px",color:"#fff",transition:"background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out"},t.header.closeButton.style)),o(r,"button"),t.header.closeButton.id&&o(r,"#"+t.header.closeButton.id),r.addEventListener("click",(()=>{l.style.setProperty("opacity","0","important"),a.style.setProperty("opacity","0","important"),setTimeout((()=>{a.remove(),n()}),300)})),s.appendChild(r)}l.appendChild(s)}if(t.content){const d=document.createElement(t.content.tag||"div");t.content.id&&(d.id=t.content.id),d.className="scrollableDialogContent",d[this.#a(t.content.text)?"innerHTML":"innerText"]=t.content.text,i(d,Object.assign({width:"auto",height:"auto","background-color":"rgba(221, 216, 216, 0.26)","border-radius":"8px",flex:"1 1 auto","max-height":"calc(100% - 20%)","overflow-y":"auto",padding:"4px 5px",margin:"2px 10px 10px 10px",color:"#555","scroll-behavior":"smooth","box-sizing":"unset","overflow-wrap":"break-word"},t.content.style)),o(d,"content"),l.appendChild(d)}a.appendChild(l),a.style.setProperty("display","flex","important"),setTimeout((()=>{a.style.setProperty("opacity","1","important"),l.style.setProperty("opacity","1","important")}),10)}else{const c=document.createElement("dialog");if(c.id=t.dialog.id||"modalDialog",i(c,Object.assign({display:"block",border:"none","border-radius":"10px","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)",margin:"auto",padding:"15px","min-width":"300px","min-height":"150px","max-width":"50vw","max-height":"85vh","box-sizing":"border-box","font-family":"Arial, sans-serif","background-color":"#f9f9f9","overflow-y":"auto","overflow-x":"hidden",animation:"fade-in 0.3s ease","animation-fill-mode":"forwards"},t.dialog.style)),o(c,"dialog"),t.header){const g=document.createElement(t.header.tag||"div");if(t.header.id&&(g.id=t.header.id),i(g,Object.assign({width:"100%",height:"auto","box-sizing":"unset",padding:"0",margin:"0 0 10px 0","margin-bottom":"10px"},t.header.style)),o(g,"header"),t.header.title){const u=document.createElement(t.header.title.tag||"h4");t.header.title.id&&(u.id=t.header.title.id),u.innerText=t.header.title.text,i(u,Object.assign({width:"auto",height:"auto","box-sizing":"unset",padding:"0",margin:"0","font-size":"1.5rem",color:"#333","font-weight":"bold"},t.header.title.style)),g.appendChild(u)}c.appendChild(g)}if(t.content){const p=document.createElement(t.content.tag||"div");t.content.id&&(p.id=t.content.id),p.className="scrollableDialogContent",p[this.#a(t.content.text)?"innerHTML":"innerText"]=t.content.text,i(p,Object.assign({width:"auto",height:"auto","background-color":"rgba(221, 216, 216, 0.26)","box-sizing":"unset","border-radius":"8px","min-height":"50px","max-height":"300px",padding:"4px 5px",margin:"0 0 20px 0","border-bottom":"1px solid #ccc",color:"#555","overflow-y":"auto","scroll-behavior":"smooth","overflow-wrap":"break-word"},t.content.style)),o(p,"content"),c.appendChild(p)}if(t.input){const b=document.createElement("div");i(b,{width:"100%",height:"auto",display:"flex","box-sizing":"unset",padding:"0",margin:"0 0 20px 0"});const h=document.createElement("input");function y(t){if("Enter"===t.key&&t.target===h){t.target.closest("dialog").querySelector("#btnOk").dispatchEvent(new Event("click")),document.removeEventListener("keyup",y)}}t.input.id&&(h.id=t.input.id),h.type=t.input.type||"text",i(h,Object.assign({width:"100%",height:"30px","font-family":"Arial, sans-serif","box-sizing":"unset",padding:"0 4px",margin:"0","font-size":"small",border:"1px solid #ccc","border-radius":"4px"},t.input.style)),o(h,"input"),b.appendChild(h),c.appendChild(b),document.addEventListener("keyup",y)}if(t.footer&&Array.isArray(t.footer.buttons)){const m=document.createElement(t.footer.tag||"div");t.footer.id&&(m.id=t.footer.id),i(m,Object.assign({width:"100%",height:"auto","box-sizing":"unset",padding:"0",display:"flex","justify-content":"space-between",gap:"4px"},t.footer.style)),o(m,"footer");const f=t.footer.buttons.length;for(const x of t.footer.buttons){const w=document.createElement(x.tag||"button");x.id&&(w.id=x.id),w.innerText=x.text,1===f?w.style.setProperty("width","100%","important"):2===f?(w.style.setProperty("width","48%","important"),w.style.setProperty("margin","1%","important")):(w.style.setProperty("flex","1","important"),w.style.setProperty("margin","0 4px","important")),i(w,Object.assign({"user-select":"none","background-color":"#adb5bd",width:"100%",height:"auto","box-sizing":"unset",padding:"8px 16px",margin:"0","font-size":"small",border:"none","border-radius":"4px",color:"#fff",transition:"background-color 0.2s ease-in-out, box-shadow 0.2s ease-in-out"},x.style)),o(w,"button"),x.id&&o(w,"#"+x.id),w.addEventListener("click",(e=>{const o={output:null};if(t.input){const t=e.target.closest("dialog").querySelector("input");o.output=t?this.#n(t.value):null}o.option=x.option,x.callback&&"function"==typeof x.callback&&x.callback(e),t.instructionDialog&&!0===x.navigation||(c.close(),n(o),c.remove())})),m.appendChild(w)}c.appendChild(m)}document.body.prepend(c),c.open||c.showModal()}}))}static async showInputDialog(t,e,o={}){const i=Object.assign({input:{focus:{outline:"2px solid rgba(204, 204, 204, 0.5)","box-shadow":"0 4px 8px rgba(0, 0, 0, 0.2)"},blur:{outline:"none","box-shadow":"none"}}},this.#i,o?.eventStyles||{}),n={dialog:{id:"inputDialog",style:o?.dialog||{}},header:{tag:"header",id:"inputDialogHeader",style:o?.header||{},title:{tag:"h4",id:"inputDialogTitle",text:t,style:o?.title||{}}},content:{tag:"main",id:"inputDialogContent",text:e,style:o?.content||{}},input:{id:"inputDialogInput",type:"text",style:o?.input||{}},footer:{tag:"footer",id:"inputDialogFooter",style:o?.footer||{},buttons:[{tag:"button",id:"btnOk",text:"OK",style:o?.btnOk||{},option:this.OK_OPTION},{tag:"button",id:"btnCancel",text:"Cancel",style:o?.btnCancel||{},option:this.CANCEL_OPTION}]},eventStyles:i};await this.#o;const a=this.#l(n,!1);return this.#o=a(),await this.#o}static async showMessageDialog(t,e,o={}){const i=Object.assign({},this.#i,o?.eventStyles||{}),n={dialog:{id:"messageDialog",style:o?.dialog||{}},header:{tag:"header",id:"messageDialogHeader",style:o?.header||{},title:{tag:"h4",id:"messageDialogTitle",text:t,style:o?.title||{}}},content:{tag:"main",id:"messageDialogContent",text:e,style:o?.content||{}},footer:{tag:"footer",id:"messageDialogFooter",style:o?.footer||{},buttons:[{tag:"button",id:"btnOk",text:"OK",style:o?.btnOk||{},option:this.OK_OPTION}]},eventStyles:i};await this.#o;const a=this.#l(n,!1);return this.#o=a(),await this.#o}static async showConfirmDialog(t,e,o={}){const i=Object.assign({},this.#i,o?.eventStyles||{}),n={dialog:{id:"confirmDialog",style:o?.dialog||{}},header:{tag:"header",id:"confirmDialogHeader",style:o?.header||{},title:{tag:"h4",id:"confirmDialogTitle",text:t,style:o?.title||{}}},content:{tag:"main",id:"confirmDialogContent",text:e,style:o?.content||{}},footer:{tag:"footer",id:"confirmDialogFooter",style:o?.footer||{},buttons:[{tag:"button",id:"btnYes",text:"Yes",style:o?.btnYes||{},option:this.YES_OPTION},{tag:"button",id:"btnNo",text:"No",style:o?.btnNo||{},option:this.NO_OPTION}]},eventStyles:i};await this.#o;const a=this.#l(n,!1);return this.#o=a(),await this.#o}static async showPlainDialog(t,e={}){const o=Object.assign({},this.#i,e?.eventStyles||{}),i={backdrop:{id:"plainDialogBackdrop",style:e?.backdrop||{}},dialog:{id:"plainDialog",style:e?.dialog||{}},header:{tag:"div",id:"plainDialogHeader",style:e?.header||{},closeButton:{tag:"button",id:"btnClose",text:"×",style:e?.btnClose||{}}},content:{tag:"div",id:"plainDialogContent",text:t,style:e?.content||{}},eventStyles:o};await this.#o;const n=this.#l(i,!0);return this.#o=n(),await this.#o}static async showInstructionDialog(t,e,o={}){if(!Array.isArray(e))return void await this.showMessageDialog("Invalid Content","The contents must be array of strings.");let i=null,n=0;const a=e.length;if(!function(t){return t.every((t=>"object"!=typeof t||null===t))}(e))return void await this.showMessageDialog("Invalid content.","Include only strings.");if(!(a>0))return void await this.showMessageDialog("Empty content.","Please add content at least 1.");i='<div id="instructionCardContainer">';for(const t of e)i+=`<div class="instructionCard">${t}</div>`;i+="</div>";const l=Object.assign({},this.#i,o?.eventStyles||{}),s={instructionDialog:!0,dialog:{id:"instructionDialog",style:o?.dialog||{}},header:{tag:"header",id:"instructionDialogHeader",style:o?.header||{},title:{tag:"h4",id:"instructionDialogTitle",text:t+` (${n+1}/${a})`,style:o?.title||{}}},content:{tag:"main",id:"instructionDialogContent",text:i,style:o?.content||{}},footer:{tag:"footer",id:"instructionDialogFooter",style:o?.footer||{},buttons:[]},eventStyles:l};function r(){const t=document.getElementById("instructionCardContainer").getElementsByClassName("instructionCard");for(let e=0;e<a;e++)t[e].style.display=e===n?"block":"none";!function(){const t=document.getElementById("btnPrev"),e=document.getElementById("btnNext");t&&(t.style.display=0===n?"none":"inline-block");e&&(e.innerText=n===a-1?"OK":"Next >",e.navigation=n!==a-1)}()}1===a?s.footer.buttons.push({tag:"button",id:"btnOk",text:"OK",style:o?.btnOk||{},option:this.OK_OPTION,navigation:!1}):s.footer.buttons.push({tag:"button",id:"btnPrev",text:"< Previous",style:o?.btnPrev||{},option:null,navigation:!0,callback:e=>{e.target.focus();const o=document.getElementById("instructionDialogTitle");n>0&&(n--,r()),o.innerText=t+` (${n+1}/${a})`}},{tag:"button",id:"btnNext",text:"Next >",style:o?.btnNext||{},option:null,navigation:!0,callback:e=>{e.target.focus();const o=e.target.closest("dialog"),i=document.getElementById("instructionDialogTitle");n<a-1?(n++,r(),i.innerText=t+` (${n+1}/${a})`):n===a-1&&(o.close(),o.remove())}}),await this.#o;const d=this.#l(s,!1);return this.#o=d(),r(),await this.#o}}